import{R as e}from"./client-BoWZ1c0e.js";import{Q as t,U as s,a as n,j as r,A as a,r as i,b as o,F as l,e as c,f as d,M as u,B as x,C as h,T as m,ah as j,P as p,g as f,S as y,J as g,K as v,L as b,N as S,O as w,q as C,s as k,m as I,n as q,I as z,_,ax as A,G as E,X as P,aD as M,aX as O,t as L,ai as W,ak as T,W as B,b0 as D,aj as R,b1 as $,b2 as N,b3 as H,a1 as U}from"./mui-DEqbSeLr.js";import{g as F}from"./vendor-Cfs_Iq82.js";import{r as J,b as V,L as X,c as G,D as K,S as Q,E as Y,a as Z,P as ee,R as te,A as se}from"./ExpandMore-DsgsTLRe.js";import{h as ne,j as re,f as ae}from"./utils-B4UiVrbL.js";/* empty css            */var ie,oe={};function le(){if(ie)return oe;ie=1;var e=t();Object.defineProperty(oe,"__esModule",{value:!0}),oe.default=void 0;var n=e(J()),r=s();return oe.default=(0,n.default)((0,r.jsx)("path",{d:"m17.21 9-4.38-6.56c-.19-.28-.51-.42-.83-.42-.32 0-.64.14-.83.43L6.79 9H2c-.55 0-1 .45-1 1 0 .09.01.18.04.27l2.54 9.27c.23.84 1 1.46 1.92 1.46h13c.92 0 1.69-.62 1.93-1.46l2.54-9.27L23 10c0-.55-.45-1-1-1zM9 9l3-4.4L15 9zm3 8c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"}),"ShoppingBasket"),oe}const ce=F(le());var de,ue={};function xe(){if(de)return ue;de=1;var e=t();Object.defineProperty(ue,"__esModule",{value:!0}),ue.default=void 0;var n=e(J()),r=s();return ue.default=(0,n.default)((0,r.jsx)("path",{d:"M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2M1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2"}),"ShoppingCart"),ue}const he=F(xe());var me,je={};function pe(){if(me)return je;me=1;var e=t();Object.defineProperty(je,"__esModule",{value:!0}),je.default=void 0;var n=e(J()),r=s();return je.default=(0,n.default)((0,r.jsx)("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"}),"History"),je}const fe=F(pe());var ye,ge={};function ve(){if(ye)return ge;ye=1;var e=t();Object.defineProperty(ge,"__esModule",{value:!0}),ge.default=void 0;var n=e(J()),r=s();return ge.default=(0,n.default)([(0,r.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3 6.08 3 3.28 5.64 3.03 9h2.02C5.3 6.75 7.18 5 9.5 5 11.99 5 14 7.01 14 9.5S11.99 14 9.5 14c-.17 0-.33-.03-.5-.05v2.02c.17.02.33.03.5.03 1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19z"},"0"),(0,r.jsx)("path",{d:"M6.47 10.82 4 13.29l-2.47-2.47-.71.71L3.29 14 .82 16.47l.71.71L4 14.71l2.47 2.47.71-.71L4.71 14l2.47-2.47z"},"1")],"SearchOff"),ge}const be=F(ve());var Se,we={};function Ce(){if(Se)return we;Se=1;var e=t();Object.defineProperty(we,"__esModule",{value:!0}),we.default=void 0;var n=e(J()),r=s();return we.default=(0,n.default)((0,r.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear"),we}const ke=F(Ce());var Ie,qe={};function ze(){if(Ie)return qe;Ie=1;var e=t();Object.defineProperty(qe,"__esModule",{value:!0}),qe.default=void 0;var n=e(J()),r=s();return qe.default=(0,n.default)((0,r.jsx)("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}),"ReportProblem"),qe}const _e=F(ze());var Ae,Ee={};function Pe(){if(Ae)return Ee;Ae=1;var e=t();Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.default=void 0;var n=e(J()),r=s();return Ee.default=(0,n.default)((0,r.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6m0 14c-2.03 0-4.43-.82-6.14-2.88C7.55 15.8 9.68 15 12 15s4.45.8 6.14 2.12C16.43 19.18 14.03 20 12 20"}),"AccountCircle"),Ee}const Me=F(Pe());var Oe,Le={};function We(){if(Oe)return Le;Oe=1;var e=t();Object.defineProperty(Le,"__esModule",{value:!0}),Le.default=void 0;var n=e(J()),r=s();return Le.default=(0,n.default)((0,r.jsx)("path",{d:"M20 2H4c-1 0-2 .9-2 2v3.01c0 .72.43 1.34 1 1.69V20c0 1.1 1.1 2 2 2h14c.9 0 2-.9 2-2V8.7c.57-.35 1-.97 1-1.69V4c0-1.1-1-2-2-2m-5 12H9v-2h6zm5-7H4V4l16-.02z"}),"Inventory"),Le}const Te=F(We());var Be,De={};function Re(){if(Be)return De;Be=1;var e=t();Object.defineProperty(De,"__esModule",{value:!0}),De.default=void 0;var n=e(J()),r=s();return De.default=(0,n.default)((0,r.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-5 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"}),"Article"),De}const $e=F(Re());var Ne,He={};function Ue(){if(Ne)return He;Ne=1;var e=t();Object.defineProperty(He,"__esModule",{value:!0}),He.default=void 0;var n=e(J()),r=s();return He.default=(0,n.default)((0,r.jsx)("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}),"Warning"),He}const Fe=F(Ue());var Je,Ve={};function Xe(){if(Je)return Ve;Je=1;var e=t();Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.default=void 0;var n=e(J()),r=s();return Ve.default=(0,n.default)((0,r.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle"),Ve}const Ge=F(Xe());var Ke,Qe={};function Ye(){if(Ke)return Qe;Ke=1;var e=t();Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.default=void 0;var n=e(J()),r=s();return Qe.default=(0,n.default)((0,r.jsx)("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess"),Qe}const Ze=F(Ye()),et={1:"搅拌",2:"丹麦",3:"整形",4:"烤炉",5:"冷加工",6:"收银打包",7:"水吧",8:"馅料",9:"小库房"},st=n.forwardRef(function(e,t){return r.jsx(a,{elevation:6,ref:t,variant:"filled",...e})}),nt=()=>{const[e,t]=i.useState([]),[s,n]=i.useState(!0),[a,E]=i.useState(null),[P,M]=i.useState(""),[O,L]=i.useState([]),[W,T]=i.useState({}),[B,D]=i.useState(!1),[R,$]=i.useState(!1),[N,H]=i.useState(""),[U,F]=i.useState("info"),[J,X]=i.useState(!1),[G,K]=i.useState(null),[Q,Y]=i.useState(0),Z=i.useCallback(async()=>{n(!0),E(null);try{const e=await fetch("/api/ingredients/list",{method:"POST",headers:{"Content-Type":"application/json","x-current-store-id":localStorage.getItem("currentStoreId")},body:JSON.stringify({})});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const s=await e.json();s.success&&Array.isArray(s.data)?t(s.data):E(s.message||"Failed to load ingredients data.")}catch(e){E(`Error fetching ingredients: ${e.message}`)}finally{n(!1)}},[]);i.useEffect(()=>{Z()},[Z]),i.useEffect(()=>{if(P&&e.length>0){const t=e.filter((e,t)=>{const s=e.stockByPost&&e.stockByPost[P]&&e.stockByPost[P].quantity>0,n=Array.isArray(e.post)&&e.post.map(String).includes(String(P));return s||n});L(t);const s={};t.forEach(e=>{let t="";if(e.stockByPost){const s=new Map(Object.entries(e.stockByPost));s.has(P)&&s.get(P)&&"number"==typeof s.get(P).quantity&&(t=s.get(P).quantity.toString())}s[e._id]=t}),T(s)}else L([]),T({})},[P,e]);const ee=(e,t="info")=>{H(e),F(t),$(!0)},te=(e,t)=>{"clickaway"!==t&&$(!1)},se=i.useCallback((e,t)=>{const s=t.replace(/[^0-9.]/g,"");T(t=>({...t,[e]:s}))},[]),ne=async e=>{D(!0);try{const t=await fetch("/api/inventory/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({postId:P,stocks:e})}),s=await t.json();if(!t.ok)throw new Error(s.message||"HTTP error!");if(!s.success)throw new Error(s.message||"库存提交失败");ee(s.message||"库存盘点数据提交成功！","success"),Z()}catch(t){ee(`提交失败: ${t.message}`,"error")}finally{D(!1),X(!1)}};return r.jsxs(o,{sx:{pb:8,pt:2},children:[r.jsxs(l,{fullWidth:!0,sx:{mb:2},children:[r.jsx(c,{id:"post-select-label",children:"选择岗位"}),r.jsxs(d,{labelId:"post-select-label",value:P,label:"选择岗位",onChange:e=>{M(e.target.value)},children:[r.jsx(u,{value:"",children:r.jsx("em",{children:"请选择..."})}),Object.entries(et).map(([e,t])=>r.jsx(u,{value:e,children:t},e))]})]}),s&&r.jsx(x,{sx:{display:"flex",justifyContent:"center",my:3},children:r.jsx(h,{})}),a&&r.jsx(m,{color:"error",align:"center",children:a}),!P&&r.jsx(m,{align:"center",color:"text.secondary",children:"请先选择一个岗位开始盘点。"}),P&&!s&&O.length>0&&r.jsxs(r.Fragment,{children:[r.jsxs(m,{variant:"h6",sx:{mb:2},children:["找到 ",O.length," 个原料需要盘点"]}),r.jsx(j,{children:O.map(e=>{var t,s,n;return null==(n=null==(s=null==(t=e.stockByPost)?void 0:t[P])?void 0:s.quantity)||n.toFixed(2),r.jsx(C,{sx:{mb:2},children:r.jsxs(k,{children:[r.jsx(m,{variant:"h6",component:"div",children:e.name}),r.jsxs(m,{sx:{mb:1.5},color:"text.secondary",children:["规格: ",e.specs||"N/A"," | 单位:"," ",e.unit||e.baseUnit||e.min||"g"]}),r.jsx(x,{display:"flex",alignItems:"center",children:r.jsx(I,{fullWidth:!0,label:"实际库存",variant:"outlined",type:"number",value:W[e._id]||"",onChange:t=>se(e._id,t.target.value),InputProps:{startAdornment:r.jsx(q,{position:"start",children:r.jsx(z,{onClick:()=>(e=>{const t=parseFloat(W[e]||0);se(e,Math.max(0,t-1).toString())})(e._id),size:"small",children:r.jsx(A,{})})}),endAdornment:r.jsx(q,{position:"end",children:r.jsx(z,{onClick:()=>(e=>{const t=parseFloat(W[e]||0);se(e,(t+1).toString())})(e._id),size:"small",children:r.jsx(_,{})})})}})})]})},e._id)})})]}),P&&!s&&0===O.length&&r.jsx(m,{align:"center",color:"text.secondary",sx:{mt:4},children:"当前岗位下没有需要盘点的物料。"}),r.jsx(p,{elevation:3,sx:{position:"fixed",bottom:56,left:0,right:0,p:2,zIndex:1e3},children:r.jsx(f,{fullWidth:!0,variant:"contained",color:"primary",size:"large",onClick:async()=>{if(!P)return void ee("请先选择一个岗位。","warning");const e=O.filter(e=>""===W[e._id]||void 0===W[e._id]),t=O.map(e=>({ingredientId:e._id,ingredientName:e.name,quantity:parseFloat(W[e._id]),unit:e.unit||e.baseUnit||e.min||"g",baseUnit:e.baseUnit||e.min,norms:e.norms})).filter(e=>!isNaN(e.quantity)&&e.quantity>=0);if(!(0===t.length&&O.length>0))return e.length>0?(Y(e.length),K(t),void X(!0)):void(t.length>0?await ne(t):0===O.length&&ee("当前岗位没有需要盘点的物料。","info"));ee("没有有效的库存数量被输入。","warning")},disabled:B||!P||0===O.length,startIcon:B?r.jsx(h,{size:20,color:"inherit"}):r.jsx(V,{}),children:B?"正在提交...":"提交盘点"})}),r.jsx(y,{open:R,autoHideDuration:6e3,onClose:te,anchorOrigin:{vertical:"top",horizontal:"center"},children:r.jsx(st,{onClose:te,severity:U,sx:{width:"100%"},children:N})}),r.jsxs(g,{open:J,onClose:()=>X(!1),children:[r.jsx(v,{children:"确认提交"}),r.jsx(b,{children:r.jsxs(S,{children:["您有 ",Q," ","项物料未填写库存，确定要提交吗？未填写的项目将不会被保存。"]})}),r.jsxs(w,{children:[r.jsx(f,{onClick:()=>X(!1),children:"取消"}),r.jsx(f,{onClick:()=>{G&&ne(G),X(!1)},color:"primary",autoFocus:!0,children:"确认提交"})]})]})]})},rt="pending",at="approved",it="rejected",ot="completed",lt={[rt]:"待处理",[at]:"已批准",[it]:"已拒绝",[ot]:"已完成"},ct={[rt]:"warning",[at]:"info",[it]:"error",[ot]:"success"},dt=e=>ct[e]||"warning",ut=({storeId:e,user:t})=>{const[s,n]=i.useState([]),[o,l]=i.useState(!0),[c,d]=i.useState(""),[u,y]=i.useState(ne(new Date)),[g,v]=i.useState(re(new Date)),[b,S]=i.useState(""),[w,q]=i.useState(!0),[z,_]=i.useState(!1),[A,D]=i.useState(new Set),R=i.useCallback(async()=>{if(e){l(!0),d("");try{const e=ae(u,"yyyy-MM-dd"),t=ae(g,"yyyy-MM-dd"),s=await fetch(`/api/transfer-requests?startDate=${e}&endDate=${t}`);if(!s.ok){const e=await s.json();throw new Error(e.message||"获取申请记录失败")}const r=await s.json();n(r.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)))}catch(t){d(t.message)}finally{l(!1)}}},[e,u,g]);i.useEffect(()=>{R()},[R]),i.useEffect(()=>{(async()=>{var s;if(e&&(null==t?void 0:t.name))try{const n=await fetch(`/api/stores/${e}`);if(n.ok){const e=(null==(s=(await n.json()).data)?void 0:s.warehouseManagers)||[];_(e.includes(t.name))}}catch(n){}})()},[e,t]);const $=i.useMemo(()=>{const e=b.trim().toLowerCase();return e?s.filter(t=>t.requestedBy&&t.requestedBy.toLowerCase().includes(e)):s},[s,b]),N=i.useMemo(()=>{if(!w)return null;const e=new Map,t=new Set;return $.forEach(s=>{t.add(s.requestedBy||"未知"),s.items.forEach(t=>{const n=t.name;if(e.has(n)){const r=e.get(n);r.quantity+=t.quantity,r.requesters.add(s.requestedBy||"未知")}else e.set(n,{name:t.name,unit:t.unit,quantity:t.quantity,requesters:new Set([s.requestedBy||"未知"])})})}),{items:Array.from(e.values()).map(e=>({...e,requesters:Array.from(e.requesters)})),totalRequesters:t.size,totalRequests:$.length}},[$,w]);return r.jsx(X,{dateAdapter:G,children:r.jsxs(x,{children:[r.jsx(m,{variant:"h5",component:"h1",gutterBottom:!0,sx:{fontWeight:"bold",textAlign:"center",my:2},children:"所有申请单据"}),r.jsx(p,{sx:{p:2,mb:2},children:r.jsxs(E,{container:!0,spacing:2,alignItems:"center",children:[r.jsx(E,{item:!0,xs:6,children:r.jsx(K,{label:"开始日期",value:u,onChange:e=>y(ne(e)),renderInput:e=>r.jsx(I,{...e,fullWidth:!0,size:"small"})})}),r.jsx(E,{item:!0,xs:6,children:r.jsx(K,{label:"结束日期",value:g,onChange:e=>v(re(e)),renderInput:e=>r.jsx(I,{...e,fullWidth:!0,size:"small"})})}),r.jsx(E,{item:!0,xs:12,children:r.jsx(I,{fullWidth:!0,size:"small",label:"按申请人姓名过滤",placeholder:"输入申请人姓名...",value:b,onChange:e=>S(e.target.value),variant:"outlined"})}),r.jsxs(E,{item:!0,xs:12,children:[r.jsx(P,{sx:{my:1}}),r.jsx(M,{control:r.jsx(O,{checked:w,onChange:e=>q(e.target.checked),color:"primary"}),label:"聚合模式 - 按物料汇总当天所有申请"})]})]})}),o&&r.jsx(x,{sx:{display:"flex",justifyContent:"center",my:4},children:r.jsx(h,{})}),c&&r.jsx(a,{severity:"error",sx:{my:2},children:c}),!o&&!c&&(0===$.length?r.jsxs(p,{variant:"outlined",sx:{p:4,textAlign:"center",mt:4},children:[r.jsx(fe,{sx:{fontSize:48,color:"text.secondary"}}),r.jsx(m,{variant:"h6",color:"text.secondary",sx:{mt:1},children:b.trim()?"没有找到匹配的申请记录":"该日期范围内没有申请记录"})]}):w?r.jsxs(x,{children:[r.jsxs(p,{sx:{p:2,mb:2,bgcolor:"info.50"},children:[r.jsx(m,{variant:"h6",color:"info.main",gutterBottom:!0,children:"物料汇总统计"}),r.jsxs(E,{container:!0,spacing:2,children:[r.jsxs(E,{item:!0,xs:4,children:[r.jsx(m,{variant:"body2",color:"text.secondary",children:"总申请人数"}),r.jsx(m,{variant:"h6",children:N.totalRequesters})]}),r.jsxs(E,{item:!0,xs:4,children:[r.jsx(m,{variant:"body2",color:"text.secondary",children:"总申请单数"}),r.jsx(m,{variant:"h6",children:N.totalRequests})]}),r.jsxs(E,{item:!0,xs:4,children:[r.jsx(m,{variant:"body2",color:"text.secondary",children:"物料种类"}),r.jsx(m,{variant:"h6",children:N.items.length})]})]})]}),N.items.map((e,t)=>r.jsx(C,{sx:{mb:2,boxShadow:2,borderRadius:2},variant:"outlined",children:r.jsxs(k,{sx:{p:1.5,"&:last-child":{pb:1.5}},children:[r.jsxs(x,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[r.jsx(m,{variant:"h6",sx:{fontWeight:"bold"},children:e.name}),r.jsx(L,{label:`总计: ${e.quantity} ${e.unit||""}`,color:"primary",variant:"outlined"})]}),r.jsxs(m,{variant:"body2",color:"text.secondary",sx:{mb:1},children:["申请人: ",e.requesters.join(", ")]}),r.jsxs(m,{variant:"caption",color:"text.secondary",children:["共 ",e.requesters.length," 人申请"]})]})},t))]}):$.map(e=>r.jsxs(C,{sx:{mb:2,boxShadow:2,borderRadius:2,borderLeft:"4px solid",borderColor:`${dt(e.status)}.main`},variant:"outlined",children:[r.jsxs(k,{sx:{p:1.5,"&:last-child":{pb:1.5}},children:[r.jsxs(x,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1.5},children:[r.jsxs(x,{children:[r.jsxs(m,{variant:"body1",sx:{fontWeight:"bold"},children:["申请人: ",e.requestedBy||"未知"]}),r.jsx(m,{variant:"caption",color:"text.secondary",display:"block",children:new Date(e.createdAt).toLocaleString("zh-CN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),r.jsx(L,{label:lt[e.status]||e.status,color:dt(e.status),size:"small",sx:{mt:.5}})]}),r.jsx(j,{dense:!0,sx:{mt:1,p:0},children:e.items.map((e,t)=>r.jsx(W,{sx:{py:.25,px:0},children:r.jsx(T,{primary:e.name,secondary:`x ${e.quantity} ${e.unit||""}`,primaryTypographyProps:{variant:"body1"},secondaryTypographyProps:{variant:"body2",color:"text.secondary"}})},t))}),e.notes&&r.jsxs(m,{variant:"body2",sx:{mt:1.5,fontStyle:"italic",color:"text.secondary",p:1.5,backgroundColor:"grey.100",borderRadius:1},children:["备注: ",e.notes]})]}),z&&"pending"===e.status&&r.jsx(B,{sx:{pt:0,px:1.5,pb:1.5},children:r.jsx(f,{variant:"contained",color:"success",size:"small",onClick:()=>(async e=>{if(null==t?void 0:t.name){D(t=>new Set(t).add(e));try{const s=await fetch(`/api/transfer-requests/${e}/mobile-approve`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userName:t.name})}),n=await s.json();s.ok?(alert("申请已批准！"),R()):alert(n.message||"批准失败")}catch(s){alert("批准申请时发生错误")}finally{D(t=>{const s=new Set(t);return s.delete(e),s})}}else alert("用户信息缺失")})(e._id),disabled:A.has(e._id),startIcon:A.has(e._id)?r.jsx(h,{size:16}):null,children:A.has(e._id)?"批准中...":"批准申请"})})]},e._id)))]})})},xt=({onStoreSelect:e,storageKey:t="defaultStoreId"})=>{const[s,o]=i.useState([]),[l,c]=i.useState(!0),[d,u]=i.useState("");i.useEffect(()=>{(async()=>{try{const e=await fetch("/api/stores");if(!e.ok)throw new Error("获取门店列表失败");const t=await e.json();if(!t.success)throw new Error(t.message||"未能加载门店数据");o(t.data)}catch(e){u(e.message)}finally{c(!1)}})()},[]);return l?r.jsxs(x,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh"},children:[r.jsx(h,{}),r.jsx(m,{sx:{ml:2},children:"正在加载门店列表..."})]}):d?r.jsx(a,{severity:"error",sx:{m:2},children:d}):r.jsxs(p,{sx:{m:2,p:2},children:[r.jsx(m,{variant:"h5",component:"h1",gutterBottom:!0,sx:{fontWeight:"bold",textAlign:"center"},children:"请选择您的门店"}),r.jsx(m,{variant:"body2",color:"text.secondary",sx:{textAlign:"center",mb:2},children:"您的选择将被记住，下次访问时将直接进入该门店。"}),r.jsx(j,{component:"nav","aria-label":"门店列表",children:s.map((a,i)=>r.jsxs(n.Fragment,{children:[r.jsx(W,{disablePadding:!0,children:r.jsxs(D,{onClick:()=>{return s=a._id,localStorage.setItem(t,s),void e(s);var s},children:[r.jsx(R,{children:r.jsx(Q,{})}),r.jsx(T,{primary:a.name})]})}),i<s.length-1&&r.jsx(P,{})]},a._id))})]})},ht=({pendingRequests:e,onBulkApprove:t,bulkApproving:s,expanded:n,onToggleExpand:i,user:o})=>{if(0===e.length)return null;const l=e.reduce((e,t)=>e+t.items.length,0);return r.jsxs(a,{severity:"warning",sx:{mb:2,"& .MuiAlert-message":{width:"100%"}},icon:r.jsx(Fe,{}),action:r.jsxs(x,{sx:{display:"flex",gap:1,alignItems:"center"},children:[r.jsx(f,{color:"inherit",size:"small",onClick:t,disabled:s,startIcon:s?r.jsx(h,{size:16}):r.jsx(Ge,{}),children:s?"批准中...":"一键批准"}),r.jsx(z,{size:"small",onClick:i,color:"inherit",children:n?r.jsx(Ze,{}):r.jsx(Y,{})})]}),children:[r.jsxs(m,{variant:"body2",sx:{fontWeight:"bold",mb:1},children:["⚠️ 有 ",e.length," 个申请待批准，影响 ",l," 个物料的库存显示"]}),r.jsx(U,{in:n,children:r.jsxs(x,{sx:{mt:2},children:[r.jsxs(m,{variant:"body2",sx:{mb:2,color:"text.secondary"},children:[r.jsx("strong",{children:"未批准申请的影响："}),r.jsx("br",{}),"• 占用虚拟库存，影响其他人申请",r.jsx("br",{}),"• 库存显示不准确，可能导致缺货",r.jsx("br",{}),"• 延误生产计划和配送安排"]}),r.jsx(m,{variant:"body2",sx:{fontWeight:"bold",mb:1},children:"待批准申请详情："}),e.slice(0,3).map(e=>r.jsxs(x,{sx:{mb:1,p:1,bgcolor:"rgba(255, 152, 0, 0.1)",borderRadius:1,fontSize:"0.875rem"},children:[r.jsxs(m,{variant:"caption",display:"block",children:["申请单 #",e._id.slice(-6)," - ",e.requestedBy||"未知用户"]}),r.jsxs(m,{variant:"caption",color:"text.secondary",children:[e.items.length," 个物料 | ",new Date(e.createdAt).toLocaleDateString()]})]},e._id)),e.length>3&&r.jsxs(m,{variant:"caption",color:"text.secondary",children:["还有 ",e.length-3," 个申请..."]})]})})]})},mt=({onAddToCart:e,onUpdateCart:t,cartItems:s,ingredients:n,loading:o,error:l})=>{const[c,d]=i.useState([]),[u,j]=i.useState("all"),[y,g]=i.useState("");i.useEffect(()=>{d(n),j("all")},[n]),i.useEffect(()=>{let e=n;"all"!==u&&(e=e.filter(e=>{var t;return null==(t=e.ingredient.post)?void 0:t.includes(Number(u))})),y.trim()&&(e=e.filter(e=>e.ingredient.name.toLowerCase().includes(y.toLowerCase().trim())||e.ingredient.specs&&e.ingredient.specs.toLowerCase().includes(y.toLowerCase().trim()))),d(e)},[u,n,y]);const v=t=>{const n=s.find(e=>e.ingredientId===t.ingredient._id);(n?n.quantity:0)+1>t.virtualStock?alert("申请数量超过可用库存"):e({ingredientId:t.ingredient._id,name:t.ingredient.name,quantity:1,unit:t.ingredient.unit})};return r.jsxs(x,{children:[r.jsx(m,{variant:"h5",component:"h1",gutterBottom:!0,sx:{fontWeight:"bold",textAlign:"center",my:2},children:"申领中心"}),r.jsxs(p,{sx:{p:1.5,mb:2,position:"sticky",top:0,zIndex:1,backgroundColor:"background.paper"},children:[r.jsx(I,{fullWidth:!0,size:"small",placeholder:"搜索原料名称或规格...",value:y,onChange:e=>g(e.target.value),sx:{mb:2},InputProps:{startAdornment:r.jsx(q,{position:"start",children:r.jsx(Z,{color:"action"})}),endAdornment:y&&r.jsx(q,{position:"end",children:r.jsx(z,{size:"small",onClick:()=>g(""),edge:"end",children:r.jsx(ke,{})})})}}),r.jsx(m,{variant:"subtitle2",sx:{mb:1,fontWeight:"bold"},children:"按岗位筛选"}),r.jsxs(x,{sx:{position:"relative"},children:[r.jsx(x,{sx:{overflowX:"auto",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},children:r.jsxs(x,{sx:{display:"flex",gap:1,py:.5,pr:"30px"},children:[r.jsx(f,{size:"small",variant:"all"===u?"contained":"outlined",onClick:()=>j("all"),children:"全部"}),Object.entries(ee).map(([e,t])=>r.jsx(f,{size:"small",variant:u===e?"contained":"outlined",onClick:()=>j(e),sx:{flexShrink:0},children:t},e))]})}),r.jsx(x,{sx:{position:"absolute",top:0,right:0,width:"30px",height:"100%",background:e=>`linear-gradient(to left, ${e.palette.background.paper}, transparent)`,pointerEvents:"none"}})]})]}),o&&r.jsx(x,{sx:{display:"flex",justifyContent:"center",my:4},children:r.jsx(h,{})}),l&&r.jsx(a,{severity:"error",children:l}),!o&&!l&&(c.length>0?r.jsx(E,{container:!0,spacing:2,children:c.map(e=>{const n=e.ingredient._id,a=s.find(e=>e.ingredientId===n);return r.jsx(E,{item:!0,xs:12,children:r.jsxs(C,{sx:{display:"flex",flexDirection:"column",boxShadow:3,borderRadius:2},children:[r.jsxs(k,{sx:{flexGrow:1,p:1.5},children:[r.jsx(m,{gutterBottom:!0,variant:"h6",component:"h2",sx:{fontSize:"1rem",fontWeight:"bold"},children:e.ingredient.name}),r.jsxs(m,{variant:"body2",color:"text.secondary",sx:{mb:1},children:["规格: ",e.ingredient.specs||"无"]}),r.jsxs(m,{variant:"body2",color:"text.secondary",children:["可用库存: ",e.virtualStock," ",e.ingredient.unit]})]}),r.jsx(B,{sx:{display:"flex",justifyContent:"flex-end",alignItems:"center",p:1.5,pt:0},children:a?r.jsxs(x,{sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(z,{color:"primary",onClick:()=>(e=>{if(!s.find(t=>t.ingredientId===e.ingredient._id))return;const n=s.map(t=>t.ingredientId===e.ingredient._id?{...t,quantity:t.quantity-1}:t).filter(e=>e.quantity>0);t(n)})(e),size:"small",children:r.jsx(te,{})}),r.jsx(m,{variant:"h6",component:"span",children:a.quantity}),r.jsx(z,{color:"primary",onClick:()=>v(e),size:"small",disabled:a.quantity>=e.virtualStock,children:r.jsx(se,{})})]}):r.jsx(f,{variant:"contained",size:"medium",onClick:()=>v(e),children:"加入购物车"})})]})},n)})}):r.jsxs(p,{variant:"outlined",sx:{p:4,textAlign:"center",mt:4},children:[r.jsx(be,{sx:{fontSize:48,color:"text.secondary"}}),r.jsx(m,{variant:"h6",color:"text.secondary",sx:{mt:1},children:y.trim()?"未找到匹配的物料":"all"===u?"暂无可用物料":"当前筛选下没有物料"}),y.trim()?r.jsx(m,{variant:"body1",color:"text.secondary",sx:{mt:1},children:"尝试修改搜索关键词或清空搜索条件。"}):"all"!==u&&r.jsx(m,{variant:"body1",color:"text.secondary",sx:{mt:1},children:"尝试选择其他岗位或“全部”。"})]}))]})},jt=({user:e,cartItems:t,onUpdateCart:s,storeId:n,refetchData:o})=>{const[l,c]=i.useState(!1),[d,u]=i.useState(""),[y,g]=i.useState("");return r.jsxs(x,{children:[r.jsx(m,{variant:"h5",component:"h1",gutterBottom:!0,sx:{fontWeight:"bold",textAlign:"center",my:2},children:"我的购物车"}),d&&r.jsx(a,{severity:"error",sx:{mb:2},children:d}),y&&r.jsx(a,{severity:"success",sx:{mb:2},children:y}),0!==t.length||y?r.jsx(j,{children:t.map((e,n)=>r.jsxs(W,{divider:!0,secondaryAction:r.jsx(f,{edge:"end",color:"error",size:"small",onClick:()=>(e=>{const n=[...t];n.splice(e,1),s(n)})(n),children:"删除"}),children:[r.jsx(T,{primary:r.jsx(m,{variant:"body1",sx:{fontWeight:500},children:e.name})}),r.jsxs(x,{sx:{display:"flex",alignItems:"center",mx:2},children:[r.jsx(I,{type:"number",size:"small",variant:"outlined",value:e.quantity,onChange:e=>((e,n)=>{const r=[...t];r[e].quantity=Number(n),s(r.filter(e=>e.quantity>0))})(n,e.target.value),sx:{width:"70px"},inputProps:{min:1}}),r.jsx(m,{variant:"body1",component:"span",sx:{ml:1.5,minWidth:"30px",textAlign:"left"},children:e.unit})]})]},`${e.ingredientId}-${n}`))}):r.jsxs(p,{variant:"outlined",sx:{p:4,textAlign:"center",mt:4},children:[r.jsx(he,{sx:{fontSize:48,color:"text.secondary"}}),r.jsx(m,{variant:"h6",color:"text.secondary",sx:{mt:1},children:"购物车是空的"})]}),t.length>0&&r.jsxs(p,{elevation:3,sx:{p:2,mt:2,position:"sticky",bottom:60,zIndex:1,backgroundColor:"rgba(255, 255, 255, 0.95)"},children:[r.jsxs(m,{variant:"h6",sx:{mb:2},children:["总计: ",t.reduce((e,t)=>e+t.quantity,0)," 件"]}),r.jsx(f,{fullWidth:!0,variant:"contained",color:"primary",size:"large",onClick:async()=>{if(0!==t.length){c(!0),u(""),g("");try{const[r,a]=await Promise.all([fetch("/api/warehouse/stock",{headers:{"x-current-store-id":n}}),fetch("/api/transfer-requests",{headers:{"x-current-store-id":n}})]);if(!r.ok)throw new Error("无法获取最新库存信息进行校验");if(!a.ok)throw new Error("无法获取最新申请信息进行校验");const i=await r.json(),l=await a.json(),c={};l.filter(e=>"pending"===e.status).forEach(e=>{e.items.forEach(e=>{c[e.ingredientId]=(c[e.ingredientId]||0)+e.quantity})});const d=new Map;(i.items||[]).forEach(e=>{if(e.mainWarehouseStock){const t=c[e.ingredient._id]||0,s=e.mainWarehouseStock.quantity-t;d.set(e.ingredient._id,s>0?s:0)}});const u=t.filter(e=>{const t=d.get(e.ingredientId);return e.quantity>(void 0===t?0:t)});if(u.length>0){const e=u.map(e=>e.name).join(", ");throw new Error(`库存不足或物料已下架: ${e}。请返回修改数量或移除物料。`)}const x={items:t.map(e=>({ingredientId:e.ingredientId,name:e.name,unit:e.unit,quantity:e.quantity})),requestedBy:(null==e?void 0:e.name)||"未知飞书用户"},h=await fetch("/api/transfer-requests",{method:"POST",headers:{"Content-Type":"application/json","x-current-store-id":n},body:JSON.stringify(x)});if(!h.ok){const e=await h.json();throw new Error(e.message||"提交申请失败")}g("您的要货申请已成功提交！"),s([]),o&&o()}catch(r){u(r.message)}finally{c(!1),setTimeout(()=>{g(""),u("")},5e3)}}else u("购物车是空的！")},disabled:l,children:l?r.jsx(h,{size:24,color:"inherit"}):"提交申请"})]})]})},pt=({requests:e,loading:t,error:s,user:n,storeId:o})=>{const[l,c]=i.useState(!1),[d,u]=i.useState([]),[y,g]=i.useState(!1),v=e=>{switch(e){case"completed":return"success";case"approved":return"info";case"rejected":return"error";default:return"warning"}},b={pending:"待处理",approved:"已批准",rejected:"已拒绝",completed:"已完成"},S=l?d:e,w=l?y:t;return r.jsxs(x,{children:[r.jsx(m,{variant:"h5",component:"h1",gutterBottom:!0,sx:{fontWeight:"bold",textAlign:"center",my:2},children:l?"所有申请记录":"我的申请记录"}),r.jsx(x,{sx:{display:"flex",justifyContent:"center",mb:2},children:r.jsx(f,{variant:l?"outlined":"contained",onClick:()=>{l||(async()=>{if(o){g(!0);try{const e=await fetch("/api/transfer-requests",{headers:{"x-current-store-id":o}});if(!e.ok)throw new Error("获取所有申请记录失败");const t=await e.json();u(t.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)))}catch(e){}finally{g(!1)}}})(),c(!l)},size:"small",children:l?"只看我的申请":"查看所有申请"})}),w&&r.jsx(x,{sx:{display:"flex",justifyContent:"center",my:4},children:r.jsx(h,{})}),s&&r.jsx(a,{severity:"error",children:s}),!w&&!s&&(0===S.length?r.jsxs(p,{variant:"outlined",sx:{p:4,textAlign:"center",mt:4},children:[r.jsx(fe,{sx:{fontSize:48,color:"text.secondary"}}),r.jsx(m,{variant:"h6",color:"text.secondary",sx:{mt:1},children:l?"暂无申请记录":"暂无我的申请记录"})]}):S.map(e=>r.jsx(C,{sx:{mb:2,boxShadow:2,borderRadius:2,borderLeft:"4px solid",borderColor:`${v(e.status)}.main`},variant:"outlined",children:r.jsxs(k,{sx:{p:1.5,"&:last-child":{pb:1.5}},children:[r.jsxs(x,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1.5},children:[r.jsxs(x,{children:[r.jsxs(m,{variant:"body1",sx:{fontWeight:"bold"},children:["申请单 #",e._id.slice(-6)]}),l&&r.jsxs(m,{variant:"body2",color:"primary",sx:{fontWeight:"medium"},children:["申请人: ",e.requestedBy||"未知"]}),r.jsx(m,{variant:"caption",color:"text.secondary",display:"block",children:new Date(e.createdAt).toLocaleString("zh-CN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),r.jsx(L,{label:b[e.status]||e.status,color:v(e.status),size:"small",sx:{mt:.5}})]}),r.jsx(j,{dense:!0,sx:{mt:1,p:0},children:e.items.map((e,t)=>r.jsx(W,{sx:{py:.25,px:0},children:r.jsx(T,{primary:e.name,secondary:`x ${e.quantity} ${e.unit||""}`,primaryTypographyProps:{variant:"body1",fontWeight:"medium"},secondaryTypographyProps:{variant:"body2",color:"text.secondary"}})},t))}),e.notes&&r.jsxs(m,{variant:"body2",sx:{mt:1.5,fontStyle:"italic",color:"text.secondary",p:1.5,backgroundColor:"grey.100",borderRadius:1},children:["备注: ",e.notes]})]})},e._id)))]})},ft=()=>{const[e,t]=i.useState(null),[s,n]=i.useState("shop"),[l,c]=i.useState([]),[d,u]=i.useState(""),[j,f]=i.useState(!0),[g,v]=i.useState([]),[b,S]=i.useState([]),[w,C]=i.useState([]),[k,I]=i.useState(!1),[q,z]=i.useState(!1),[_,A]=i.useState(!1),[E,P]=i.useState(!1),[M,O]=i.useState(""),[L,W]=i.useState("info"),{user:T,loading:B,error:D,isFeishuEnv:R,checkingEnv:U}=(()=>{const[e,t]=i.useState(null),[s,n]=i.useState(!0),[r,a]=i.useState(""),[o,l]=i.useState(!1),[c,d]=i.useState(!0);return i.useEffect(()=>{const e=(s="appId",new URLSearchParams(window.location.search).get(s));var s;let r=0;const i=setInterval(()=>{if(window.h5sdk&&window.tt){clearInterval(i),l(!0),d(!1);const s=localStorage.getItem("user");if(s&&"undefined"!==s)return t(JSON.parse(s)),void n(!1);if(!e)return a("URL中缺少appId参数。"),void n(!1);window.h5sdk.ready(()=>{const s=setTimeout(()=>{a("飞书授权请求超时，请稍后重试。"),n(!1)},1e4);tt.requestAccess({appID:e,scopeList:[],success:r=>{clearTimeout(s),fetch("/api/feishu/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:r.code,appID:e})}).then(e=>{if(!e.ok)throw new Error("获取用户信息失败");return e.json()}).then(e=>{localStorage.setItem("user",JSON.stringify(e)),t(e)}).catch(e=>{a(e.message)}).finally(()=>n(!1))},fail:e=>{clearTimeout(s),a(`飞书授权失败: ${JSON.stringify(e)}`),n(!1)}})})}else r++,r>=6&&(clearInterval(i),d(!1),l(!1),n(!1))},500);return()=>clearInterval(i)},[]),{user:e,loading:s,error:r,isFeishuEnv:o,checkingEnv:c}})();i.useEffect(()=>{const e=new URLSearchParams(window.location.search).get("store");if(e)return sessionStorage.setItem("lockedStoreId",e),void t(e);const s=sessionStorage.getItem("lockedStoreId");if(s)return void t(s);const n=localStorage.getItem("defaultStoreId");n&&t(n)},[]);const F=i.useCallback(async()=>{if(e){f(!0),u("");try{const[t,s]=await Promise.all([fetch("/api/warehouse/stock",{headers:{"x-current-store-id":e}}),fetch("/api/transfer-requests",{headers:{"x-current-store-id":e}})]);if(!t.ok)throw new Error("获取物料列表失败");if(!s.ok)throw new Error("获取申请记录失败");const n=await t.json(),r=await s.json(),a=r.filter(e=>e.requestedBy===(null==T?void 0:T.name));S(a.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)));const i=r.filter(e=>"pending"===e.status);C(i),I(i.length>0);const o={};r.filter(e=>"pending"===e.status).forEach(e=>{e.items.forEach(e=>{o[e.ingredientId]=(o[e.ingredientId]||0)+e.quantity})});const l=(n.items||[]).filter(e=>e.mainWarehouseStock&&e.mainWarehouseStock.quantity>0).map(e=>{const t=o[e.ingredient._id]||0,s=e.mainWarehouseStock.quantity-t;return{...e,virtualStock:s>0?s:0}});v(l)}catch(t){u(t.message)}finally{f(!1)}}},[e]);i.useEffect(()=>{R&&T&&e&&F()},[R,T,e,F]);const J=e=>{c(t=>t.find(t=>t.ingredientId===e.ingredientId)?t.map(t=>t.ingredientId===e.ingredientId?{...t,quantity:t.quantity+e.quantity}:t):[...t,e])},V=e=>{c(e)},X=(e,t="info")=>{O(e),W(t),P(!0)};return U||B?r.jsxs(o,{sx:{mt:4,textAlign:"center"},children:[r.jsx(h,{}),r.jsx(m,{sx:{mt:2},children:U?"正在检查运行环境...":"正在获取用户信息..."})]}):R?D?r.jsx(o,{sx:{mt:2},children:r.jsx(a,{severity:"error",children:D})}):e?r.jsxs(x,{sx:{pb:7},children:[r.jsxs(o,{children:[r.jsxs(x,{sx:{display:"flex",alignItems:"center",p:1,mb:1},children:[r.jsx(Me,{sx:{color:"action.active",mr:1}}),r.jsxs(m,{variant:"subtitle1",children:["欢迎, ",(null==T?void 0:T.name)||"用户"]})]}),k&&r.jsx(ht,{pendingRequests:w,onBulkApprove:async()=>{if(0!==w.length){A(!0);try{const t=w.map(e=>e._id),s=await fetch("/api/transfer-requests/bulk-approve",{method:"POST",headers:{"Content-Type":"application/json","x-current-store-id":e},body:JSON.stringify({requestIds:t})});if(!s.ok){const e=await s.json();throw new Error(e.message||"批准申请失败")}const n=await s.json();X(n.message||"批准成功！","success"),F()}catch(t){X(`批准失败: ${t.message}`,"error")}finally{A(!1)}}else X("没有待批准的申请","info")},bulkApproving:_,expanded:q,onToggleExpand:()=>z(!q),user:T}),(()=>{if(j&&"all-requests"!==s)return r.jsx(x,{sx:{display:"flex",justifyContent:"center",my:4},children:r.jsx(h,{})});switch(s){case"cart":return r.jsx(jt,{user:T,cartItems:l,onUpdateCart:V,storeId:e,refetchData:F});case"history":return r.jsx(pt,{requests:b,loading:j,error:d,user:T,storeId:e});case"inventory":return r.jsx(nt,{});case"all-requests":return r.jsx(ut,{storeId:e,user:T});default:return r.jsx(mt,{onAddToCart:J,onUpdateCart:V,cartItems:l,ingredients:g,loading:j,error:d,refetchData:F})}})()]}),r.jsx(p,{sx:{position:"fixed",bottom:0,left:0,right:0},elevation:3,children:r.jsxs($,{showLabels:!0,value:s,onChange:(e,t)=>{n(t)},children:[r.jsx(N,{label:"申领中心",value:"shop",icon:r.jsx(ce,{})}),r.jsx(N,{label:"购物车",value:"cart",icon:r.jsx(H,{badgeContent:l.length,color:"primary",children:r.jsx(he,{})})}),r.jsx(N,{label:"我的申请",value:"history",icon:r.jsx(fe,{})}),r.jsx(N,{label:"所有申请",value:"all-requests",icon:r.jsx($e,{})}),r.jsx(N,{label:"库存盘点",value:"inventory",icon:r.jsx(Te,{})})]})}),r.jsx(y,{open:E,autoHideDuration:6e3,onClose:()=>P(!1),anchorOrigin:{vertical:"top",horizontal:"center"},children:r.jsx(a,{onClose:()=>P(!1),severity:L,sx:{width:"100%"},children:M})})]}):r.jsx(xt,{onStoreSelect:t}):r.jsx(o,{sx:{mt:4},children:r.jsxs(p,{sx:{p:3,textAlign:"center",backgroundColor:"warning.light"},children:[r.jsx(_e,{sx:{fontSize:48,color:"warning.main"}}),r.jsx(m,{variant:"h5",sx:{mt:2,fontWeight:"bold"},children:"请在飞书客户端中打开"}),r.jsx(m,{sx:{mt:1},children:"此页面需要飞书应用环境支持，请复制链接并在飞书中访问。"})]})})},yt=window.fetch;window.fetch=function(e,t){const s=sessionStorage.getItem("lockedStoreId"),n=localStorage.getItem("defaultStoreId"),r=s||n,a={...t};return a.headers||(a.headers={}),r&&!a.headers["x-current-store-id"]&&(a.headers["x-current-store-id"]=r),yt(e,a)},e.createRoot(document.getElementById("root")).render(r.jsx(n.StrictMode,{children:r.jsx(ft,{})}));
